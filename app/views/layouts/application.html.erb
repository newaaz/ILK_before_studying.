<!DOCTYPE html>
<html>
  <head>

    <title><%= full_title(yield(:title)) %></title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    
    <script src="https://kit.fontawesome.com/b52c0bb8eb.js" crossorigin="anonymos"></script>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    
  </head>

  <body>

    <%= render 'layouts/header' %>

    <% flash.each do |message_type, message| %>
      <div class="alert alert-<%= message_type %> alert-dismissible fade show" role="alert">
        <%= message %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    <% end %>

    <main class='<%= controller.controller_name %>'>
      
      <%= yield %>
      
    </main>

    <%= render 'layouts/footer' %>

    <%= javascript_include_tag "smartmenu.js" %>
    <script>// SmartMenus init    
      $(function() {
        $('#main-menu').smartmenus({
          showTimeout: 50,
          hideTimeout: 100,
          mainMenuSubOffsetX: -1,
          mainMenuSubOffsetY: 4,
          subMenusSubOffsetX: 6,
          subMenusSubOffsetY: -6
        });
      });
      // SmartMenus mobile menu toggle button
      $(function() {
        var $mainMenuState = $('#main-menu-state');
        if ($mainMenuState.length) {
          // animate mobile menu
          $mainMenuState.change(function(e) {
            var $menu = $('#main-menu');
            if (this.checked) {
              $menu.hide().slideDown(250, function() { $menu.css('display', ''); });
            } else {
              $menu.show().slideUp(250, function() { $menu.css('display', ''); });
            }
          });
          // hide mobile menu beforeunload
          $(window).bind('beforeunload unload', function() {
            if ($mainMenuState[0].checked) {
              $mainMenuState[0].click();
            }
          });
        }
      });
    </script>
    
  </body>
</html>
